{
  "rules": {
    "admins": {
      "$uid": {
        ".read": "(auth.uid == $uid || root.child('admins').child(auth.uid).val() == true)",
        ".write": "newData.parent().parent().child('admins').child(auth.uid).val() == true"
      }
    },
    "users": {
      "$uid": {
        ".read": "(auth.uid == $uid || root.child('admins').child(auth.uid).val() == true)",
        ".indexOn": [
          "email"
        ],
        "sub": {
          ".write": "((auth.uid == $uid || newData.parent().parent().parent().child('admins').child(auth.uid).val() == true) && ((newData.val() != null && newData.isString()) && newData.val().length < 50))"
        },
        "st": {
          ".write": "((auth.uid == $uid || newData.parent().parent().parent().child('admins').child(auth.uid).val() == true) && ((newData.child('id').val() != null && newData.child('id').isString()) && newData.child('id').val().length < 50))"
        },
        "img": {
          ".write": "((auth.uid == $uid || newData.parent().parent().parent().child('admins').child(auth.uid).val() == true) && ((newData.child('p').val() != null && newData.child('p').isString()) && newData.child('p').val().length < 90))"
        },
        "d": {
          ".write": "((auth.uid == $uid || newData.parent().parent().parent().child('admins').child(auth.uid).val() == true) && (data.child('t').val() != null ? (newData.child('t').isNumber() && newData.child('t').val() >= data.child('t').val()) : (newData.child('t').isNumber() && newData.child('t').val() >= 0)))"
        },
        "i": {
          ".validate": "(newData.hasChildren(['b', 'dn', 'e', 'g', 'j', 'n', 'p']) && ((((((((((newData.child('b').val() != null && newData.child('b').isString()) && newData.child('b').val().length < 50) && true) && true) && (((newData.child('dn').val() != null && newData.child('dn').isString()) && newData.child('dn').val().length < 50) && newData.child('dn').val().length >= 5)) && (((newData.child('e').val() != null && newData.child('e').isString()) && newData.child('e').val().length < 50) && newData.child('e').val().matches(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/))) && ((newData.child('g').val() != null && newData.child('g').isString()) && newData.child('g').val().length < 50)) && (((newData.child('j').val() != null && newData.child('j').isString()) && newData.child('j').val().length < 50) && true)) && ((newData.child('n').val() != null && newData.child('n').isString()) && newData.child('n').val().length < 50)) && (((newData.child('p').val() != null && newData.child('p').isString()) && newData.child('p').val().length < 50) && ((newData.child('p').val() == 'Premium X' || newData.child('p').val() == 'Premium X') || newData.child('p').val() == 'Premium Z'))))",
          "b": {
            ".validate": "newData.isString()"
          },
          "dn": {
            ".validate": "newData.isString()"
          },
          "e": {
            ".validate": "newData.isString()"
          },
          "g": {
            ".validate": "newData.isString()"
          },
          "j": {
            ".validate": "newData.isString()"
          },
          "n": {
            ".validate": "newData.isString()"
          },
          "p": {
            ".validate": "newData.isString()"
          },
          "$other": {
            ".validate": "false"
          },
          ".write": "(auth.uid == $uid || newData.parent().parent().parent().child('admins').child(auth.uid).val() == true)"
        },
        "v": {
          "$eventId": {
            ".write": "((auth.uid == $uid || newData.parent().parent().parent().parent().child('admins').child(auth.uid).val() == true) && (newData.child('don').val() != null ? (newData.child('don').val() >= 99 && newData.child('don').val() < 200) ? true : false : (newData.parent().parent().parent().parent().child('events').child($eventId).val() != null && newData.parent().parent().parent().parent().child('events').child($eventId).child('o').child(newData.child('c').val()).val() != null) ? true : false))"
          }
        }
      }
    },
    "stripe_ids": {
      "$cust_id": {
        ".read": "auth != null",
        ".write": "newData.parent().parent().child('admins').child(auth.uid).val() == true"
      }
    },
    "reciepts": {
      ".read": "true",
      ".write": "newData.parent().child('admins').child(auth.uid).val() == true"
    },
    "queriable": {
      ".read": "true",
      "$uid": {
        "dn": {
          ".write": "(auth.uid == $uid || newData.parent().parent().parent().child('admins').child(auth.uid).val() == true)"
        },
        "p": {
          ".write": "data.val() != null ? newData.parent().parent().parent().child('admins').child(auth.uid).val() == true : (auth.uid == $uid || newData.parent().parent().parent().child('admins').child(auth.uid).val() == true)"
        }
      }
    },
    "db": {
      ".write": "newData.parent().child('admins').child(auth.uid).val() == true",
      "active_event": {
        ".read": "true"
      },
      "events": {
        ".read": "auth != null"
      }
    }
  }
}
